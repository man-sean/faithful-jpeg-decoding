# general settings
name: ESRGAN_x1_qf_5_r1_stochastic_first_moment_1e0_bs8_ex8_it8_faithful_1e0_FFHQ64
model_type: ESRGANModel
scale: 1
num_gpu: 1  # set num_gpu: 0 for cpu mode
manual_seed: 0

datasets:
  test_1:  # the 1st test dataset
    name: FFHQ
    type: JPEGDataset
    dataroot_gt: /home/sean.man/datasets/ffhq_64/test/dummy
    io_backend:
      type: disk

    gt_size: 64
    use_hflip: false
    use_rot: false
    qf: 5

# network structures
network_g:
  type: RRDBNet
  num_in_ch: 3
  num_out_ch: 3
  num_feat: 64
  num_block: 23
  scale: 1
  noise_injection: true
  noise_injection_upsample: true

# path
path:
  pretrain_network_g: /home/sean.man/faithful-jpeg-decoding/experiments/ESRGAN_x1_qf_5_r1_stochastic_first_moment_1e0_bs8_ex8_it8_faithful_1e0_FFHQ64/models/net_g_390000.pth
  strict_load_g: true

# validation settings
#val:
#  save_img: false #true
#  suffix: ~  # add suffix to saved images, if None, use exp name
#
#  metrics:
#    psnr: # metric name, can be arbitrary
#      type: calculate_psnr
#      crop_border: 0
#      test_y_channel: false
#    ssim:
#      type: calculate_ssim
#      crop_border: 0
#      test_y_channel: false
#    faithfulness_rmse:
#      type: calculate_jpeg_faithfulness_rmse
#      crop_border: 0
#      qf: 10
#      test_y_channel: false
#      better: lower  # the lower, the better

# FID settings
#fid:
#  repeat: 32
#  opt:
#    type: calculate_fid_given_paths
#    gt_path: /home/sean.man/datasets/ffhq_128/train_fid_stats.npz
#    dims: 2048
#    num_workers: 10
#    batch_size: 64
#    better: lower  # the lower, the better

# collage settings
collage:
  idx_to_save: [121, 123]
  realizations: 4
